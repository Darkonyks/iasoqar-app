{% extends "layouts/base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="content-wrapper">
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1 class="m-0">{{ title }}</h1>
        </div>
        <div class="col-sm-6">
          <div class="float-sm-right">
            {% if company %}
            <a href="{% url 'company:detail' pk=company.pk %}" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Nazad na kompaniju
            </a>
            {% else %}
            <a href="{% url 'company:location_list' %}" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Nazad
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">
                <i class="fas fa-map-marker-alt"></i>
                {% if object %}Izmena lokacije{% else %}Nova lokacija{% endif %}
              </h3>
            </div>
            <form method="post">
              {% csrf_token %}
              {{ form.company }}
              
              {% if form.non_field_errors %}
              <div class="alert alert-danger m-3">
                {{ form.non_field_errors }}
              </div>
              {% endif %}
              
              <div class="card-body">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="{{ form.name.id_for_label }}">Naziv lokacije <span class="text-danger">*</span></label>
                      {{ form.name }}
                      {% if form.name.errors %}
                      <div class="text-danger">{{ form.name.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-md-8">
                    <div class="form-group">
                      <label for="{{ form.street.id_for_label }}">Ulica</label>
                      {{ form.street }}
                      {% if form.street.errors %}
                      <div class="text-danger">{{ form.street.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="{{ form.street_number.id_for_label }}">Broj</label>
                      {{ form.street_number }}
                      {% if form.street_number.errors %}
                      <div class="text-danger">{{ form.street_number.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="{{ form.city.id_for_label }}">Grad</label>
                      {{ form.city }}
                      {% if form.city.errors %}
                      <div class="text-danger">{{ form.city.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="{{ form.postal_code.id_for_label }}">Poštanski broj</label>
                      {{ form.postal_code }}
                      {% if form.postal_code.errors %}
                      <div class="text-danger">{{ form.postal_code.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="{{ form.country.id_for_label }}">Država</label>
                      {{ form.country }}
                      {% if form.country.errors %}
                      <div class="text-danger">{{ form.country.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="{{ form.notes.id_for_label }}">Napomena</label>
                      {{ form.notes }}
                      {% if form.notes.errors %}
                      <div class="text-danger">{{ form.notes.errors }}</div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="card-footer">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-save"></i> {{ submit_text|default:"Sačuvaj" }}
                </button>
                {% if company %}
                <a href="{% url 'company:detail' pk=company.pk %}" class="btn btn-secondary">
                  <i class="fas fa-times"></i> Otkaži
                </a>
                {% else %}
                <a href="{% url 'company:location_list' %}" class="btn btn-secondary">
                  <i class="fas fa-times"></i> Otkaži
                </a>
                {% endif %}
              </div>
            </form>
          </div>
        </div>
        
        {% if company %}
        <div class="col-md-4">
          <div class="card card-info">
            <div class="card-header">
              <h3 class="card-title"><i class="fas fa-building"></i> Kompanija</h3>
            </div>
            <div class="card-body">
              <p><strong>{{ company.name }}</strong></p>
              {% if company.pib %}
                <p class="mb-1"><small class="text-muted">PIB:</small> {{ company.pib }}</p>
              {% endif %}
              {% if company.mb %}
                <p class="mb-1"><small class="text-muted">MB:</small> {{ company.mb }}</p>
              {% endif %}
              {% if company.city %}
                <p class="mb-0"><small class="text-muted">Grad:</small> {{ company.city }}</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
